{"version":3,"file":"orders.js","sources":["/Users/richmondwatkins/Documents/Code/super-takeout3/app/static/js/es6/orders.es6.js"],"names":[],"mappings":"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","sourcesContent":["/* global ajax */\n/* jshint unused:false */\n\n(function(){\n  'use strict';\n\n  $(document).ready(init);\n\n  function init(){\n    $('form#order').on('change', '.menu', getMenu);\n    $('form#order').on('change', '.dish', formChanged);\n    $('form#order').on('click', '.nuke', delMenu);\n\n    $('form#order').on('change', 'input', formChanged);\n    $('form#order').on('blur', 'input', formChanged);\n\n    $('#logout').click(logout);\n    $('#add').click(add);\n\n  }\n\n\n  function logout(){\n    console.log('clicked');\n\n    // alert('hey..whatever');\n    ajax(`/logout`, 'get', null, h=>{\n\n    document.location.replace('/');\n    \n    console.log(h);\n    });\n\n  }\n\n  function formChanged(){\n    var item = $(this).parent();\n    updateCost(item);\n  }\n\n  function updateCost(item){\n    updateSubTotal(item);\n    updateTotal();\n  }\n\n  function updateSubTotal(item){\n    var subtotal = 0;\n    var qty = item.find('input').val() * 1;\n    var cost = item.find('.dish option:selected').attr('data-cost') * 1;\n    if(qty > 0 && !isNaN(cost)){\n      subtotal = (qty * cost);\n    }\n\n    item.data('subtotal', subtotal);\n  }\n\n  function updateTotal(){\n    var subtotals = $('.menu-item').map((i,d)=>$(d).data('subtotal')).toArray();\n    var total = 0;\n\n    if(subtotals.length){\n      total = subtotals.reduce((p,c)=>p+c);\n    }\n\n    $('#total').text('$' + total.toFixed(2));\n  }\n\n  function add(){\n    var item = $('form#order > .menu-item:last-child');\n    $('form#order').append(item.clone());\n  }\n\n  function delMenu(e){\n    if($('form#order > .menu-item').length > 1){\n      $(this).parent().remove();\n      updateTotal();\n    }\n\n    e.preventDefault();\n  }\n\n  function getMenu(){\n    var menu = $(this).val();\n    var next = $(this).next();\n    ajax(`/dishes/${menu}`, 'get', null, h=>{\n      next.empty().append(h);\n      updateCost(next.parent());\n    });\n  }\n})();\n"]}